import random
import time
import tkinter as tk


# -------------------------------
# CLASSES DAS FRUTAS
# -------------------------------
class Fruta:
    def __init__(self, nome, emoji, chance):
        self.nome = nome
        self.emoji = emoji
        self.chance = chance

    def __str__(self):
        return self.emoji


class Cereja(Fruta):
    def __init__(self):
        super().__init__("Cereja", "ğŸ’", 0.2)


class Limao(Fruta):
    def __init__(self):
        super().__init__("LimÃ£o", "ğŸ‹", 0.5)


class Melancia(Fruta):
    def __init__(self):
        super().__init__("Melancia", "ğŸ‰", 0.3)


# -------------------------------
# CLASSE DO CASSINO
# -------------------------------
class Cassino:
    def __init__(self):
        self.frutas = [Cereja(), Limao(), Melancia()]

    def verificar_resultado(self, roleta):
        if roleta[0].nome == roleta[1].nome == roleta[2].nome:
            return "ğŸ€ JACKPOT! TrÃªs iguais! VocÃª ganhou o prÃªmio mÃ¡ximo!"
        elif (roleta[0].nome == roleta[1].nome or
              roleta[1].nome == roleta[2].nome or
              roleta[0].nome == roleta[2].nome):
            return "âœ¨ Duas frutas iguais! VocÃª ganhou um prÃªmio menor!"
        else:
            return "ğŸ’€ Nenhuma combinaÃ§Ã£o... azar, tenta de novo!"


# -------------------------------
# CLASSE ROLETA (HERDA DE CASSINO)
# -------------------------------
class Roleta(Cassino):
    def __init__(self):
        super().__init__()

    def girar_roleta(self):
        pesos = [f.chance for f in self.frutas]
        return random.choices(self.frutas, weights=pesos, k=3)


# -------------------------------
# INTERFACE TKINTER
# -------------------------------
class CassinoGUI:
    def __init__(self, root):
        self.roleta = Roleta()
        self.root = root
        self.root.title("ğŸ° Cassino Python")
        self.root.geometry("400x400")
        self.root.configure(bg="#222")

        # TÃ­tulo
        self.label_titulo = tk.Label(root, text="ğŸ° Cassino da Sorte ğŸ°",
                                     font=("Arial", 20, "bold"), fg="gold", bg="#222")
        self.label_titulo.pack(pady=20)

        # Mostrador da roleta
        self.roleta_label = tk.Label(root, text="ğŸ‹ ğŸ‰ ğŸ’",
                                     font=("Arial", 50), bg="#222")
        self.roleta_label.pack(pady=40)

        # BotÃ£o de girar
        self.botao_girar = tk.Button(root, text="GIRAR ğŸ²", command=self.jogar,
                                     font=("Arial", 16, "bold"), bg="gold", fg="black",
                                     activebackground="#ffcc00", padx=20, pady=10)
        self.botao_girar.pack(pady=10)

        # Resultado
        self.resultado_label = tk.Label(root, text="", font=("Arial", 14, "bold"),
                                        fg="white", bg="#222")
        self.resultado_label.pack(pady=20)

    def animar_roleta(self, emojis):
        """Anima a roleta antes de mostrar o resultado."""
        for _ in range(5):
            self.roleta_label.config(text=" ".join(random.choices(["ğŸ‹", "ğŸ‰", "ğŸ’"], k=3)))
            self.root.update()
            time.sleep(0.1)
        self.roleta_label.config(text=" ".join(emojis))

    def jogar(self):
        roleta_resultado = self.roleta.girar_roleta()
        emojis = [str(f) for f in roleta_resultado]
        self.animar_roleta(emojis)
        resultado = self.roleta.verificar_resultado(roleta_resultado)
        self.resultado_label.config(text=resultado)


# -------------------------------
# EXECUTAR O JOGO
# -------------------------------
if __name__ == "__main__":
    root = tk.Tk()
    app = CassinoGUI(root)
    root.mainloop()
